## Геометрия 1
```
Точки-прямые-отрезки
Скалярные/векторные произведения
Расстояния, пересечения и т.п
Способы хранения в С++
Перегрузка операторов
```

Что дети должны знать по итогу урока:

1. Уравнения прямой, отрезка, луча.
2. Что такое вектор, радиус-вектор. Операции с векторами.
3. Определения из мира векторов по типу коллинеарности и тп.
4. Знать, что такое синус и косинус, градусы и радианы
5. Что такое скалярное произведение, 2 формулы
6. Что такое векторное произведение*, 2 формулы
7. Расстояние от точки до прямой
8. Площадь через векторное произведение
9. И как с этим всем работать в коде

Да, дети могут быть разных классов и уровней. Да, эти темы обычно изучаются месяцами, если не годами. Но на олимпиадах это надо знать и уметь с этим работать. Тут подход должен быть не как в школе, даем только то, что нужно.

По сути это занятие - ликбез по векторам и началам линала.

Как можно рассказать векторы наименее болезненно?

Предлагается следующая модель:

Вот, мы умеем работать с числами: складывать, вычитать, умножать. Вектор же, это не число, а просто пара чисел. Так вот давайте введем операции теперь не над числами, а над парами чисел. +, -, * на скаляр, таким образом мы и введем. А теперь обсудим геометрический смысл. И тут уже надо начать рисовать направленные отрезочки. Показать, что главное не координаты концов отрезка, а его направление. Оно однозначно задается элементами вектора. Тут же правила треугольника и тд и тп. Дать примеры на нахождение вектора по точкам. Нарисовать треугольник или многоугольник и попросить найти векторы сторон. В этом месте будет полезно отождествление обычной точки и радиус-вектора. У обоих всего 2 координаты, можем и будем отождествлять.

Глобально, избавляемся от определений, что вектор это направленный отрезок и тп. Вектор - элемент векторного пространства и точка. (Сразу же вопрос от детей, что такое векторное пространство, тут показываем свойство векторов по типу ассоциативности, коммутативности и других, однако прямо объяснять, что такое пространство - не нужно)

Вводим скалярное произведение как оно есть, через координаты и через длины с углом. Сразу же показываем, как найти угол между векторами. Даем примеры, как найти углы треугольника по заданным точкам.

Обсуждаем свойства скалярного произведения

1. Линейность
2. Равенство нулю - ортогональны. _правильно говорить именно ортогональны, а не перпендикулярны_
3. $(x, x) = |x|^{2}$

Тут возникнет вопрос, что такое косинус. Делаем лирическое отступление и рисуем тригонометрический круг. Наша цель -  показать, что это такое, и дать формулы. Из формул, это что такое радианы, связь с градусами, табличные значения и основное тригонометрическое тождество.

После возможного лирического отступления возвращаемся к уроку.

Еще показываем векторное произведение. Тут мы вообще максимально обманываем школьников, ибо результат такого произведения - тоже вектор. Да и работать с ним надо как минимум в $R^3$. Однако приятное свойство следующее: если оба вектора лежат в $R^2$, а мы работает на плоскости, то результаи лежит на оси Oz. Причем длина этого вектора с одной стороны равняется $|a||b|sin(phi)$, а с другой стороны она же будет равна единственной его ненулевой координате $b_y a_x - b_x a_y$.

Всё это можно не рассказывать, а сказать только про этот замечательный факт. С помощью него можно _находить площади_, смотреть на угол поворота между векторами, это есть знак нашего упрощенного векторного произведения.

После всего этого рассказываем про прямые и точки. Формулы прямых и поиск расстояния от точки до прямой. Главное, это найти перпендикуляр, его длину, проверить, что точка лежит на прямой, на отрезке.

_Повезло тем, у кого дети старших классов, и не повезло детям из младших классов. Но задачи общие для всех, поэтому придется потрудиться. Автор текста читал это детям 7 класса дважды. Почти все задачи из контеста после лекции они решили, но это было откровенно сложно для них_.

В плюсах работать с геометрией можно по-разному. Самый оптимальный вариант, пожалуй, написать такую структуру. Однако на олимпиаде это может занять время, да и помнить этот код нужно. Можно пока рассказать просто как магию языка, для олимпиад этого достаточно. Можно и не рассказывать.

Дополнительно, стоит отметить, что в задачах на геометрию, один из врагов детей-проблемы с точностью. Стараемся использовать поменьше типов double, помним, что встроенные функции типа `acos` не работают с числами больше 1 и меньше -1. А из-за вычислений с плавающей точкой такое вполне может случиться.

```c++
#include <iostream>
#include <cmath>
#include <iomanip>

struct Vector {
    double x, y;
    Vector& operator+=(const Vector& v) {
        x += v.x;
        y += v.y;
        return *this;
    }
    Vector& operator-=(const Vector& v) {
        x -= v.x;
        y -= v.y;
        return *this;
    }
    Vector& operator*=(int k) {
        x *= k;
        y *= k;
        return *this;
    }
    Vector& operator/=(int k) {
        x /= k;
        y /= k;
        return *this;
    }
};

Vector operator+(const Vector& a, const Vector& b) {
    Vector res = a;
    res += b;
    return res;
}
Vector operator-(const Vector& a, const Vector& b) {
    Vector res = a;
    res -= b;
    return res;
}
Vector operator*(const Vector& a, double k) {
    Vector res = a;
    res *= k;
    return res;
}
Vector operator*(double k, const Vector& a) {
    Vector res = a;
    res *= k;
    return res;
}
Vector operator/(const Vector& a, double k) {
    Vector res = a;
    res /= k;
    return res;
}

std::ostream& operator<<(std::ostream& out, const Vector& v) {
    out << "Vector: x = " << v.x << " y = " << v.y << "\n";
    return out;
}
std::istream& operator>>(std::istream& in, Vector& v) {
    in >> v.x >> v.y;
    return in;
}

double operator*(const Vector& a, const Vector& b) {
    return a.x * b.x + a.y * b.y;
}
double operator^(const Vector& a, const Vector& b) {
    return b.y * a.x - b.x * a.y;
}
```

_Такой код можно и не показывать, на ваше усмотрение._

Контролировать кол-во знаков после запятой можно с помощью такого кода:

```c++
#include <iostream>
#include <iomanip>

int main() {
    std::cout << std::setprecision(20); // Делает 20 знаков после запятой
    std::cout << std::fixed;
    double a = 10;
    double b = a / 3;
    std::cout << b << "\n"; // У меня вывело 3.33333333333333348136
    return 0;
}
```